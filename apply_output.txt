
Terraform used the selected providers to generate the following execution
plan. Resource actions are indicated with the following symbols:
  [32m+[0m create[0m

Terraform will perform the following actions:

[1m  # module.k3s_haproxy.aws_instance.haproxy_bastion[0m will be created
[0m  [32m+[0m[0m resource "aws_instance" "haproxy_bastion" {
      [32m+[0m[0m ami                                  = "ami-020cba7c55df1f615"
      [32m+[0m[0m arn                                  = (known after apply)
      [32m+[0m[0m associate_public_ip_address          = true
      [32m+[0m[0m availability_zone                    = (known after apply)
      [32m+[0m[0m cpu_core_count                       = (known after apply)
      [32m+[0m[0m cpu_threads_per_core                 = (known after apply)
      [32m+[0m[0m disable_api_stop                     = (known after apply)
      [32m+[0m[0m disable_api_termination              = (known after apply)
      [32m+[0m[0m ebs_optimized                        = (known after apply)
      [32m+[0m[0m enable_primary_ipv6                  = (known after apply)
      [32m+[0m[0m get_password_data                    = false
      [32m+[0m[0m host_id                              = (known after apply)
      [32m+[0m[0m host_resource_group_arn              = (known after apply)
      [32m+[0m[0m iam_instance_profile                 = (known after apply)
      [32m+[0m[0m id                                   = (known after apply)
      [32m+[0m[0m instance_initiated_shutdown_behavior = (known after apply)
      [32m+[0m[0m instance_lifecycle                   = (known after apply)
      [32m+[0m[0m instance_state                       = (known after apply)
      [32m+[0m[0m instance_type                        = "t3.micro"
      [32m+[0m[0m ipv6_address_count                   = (known after apply)
      [32m+[0m[0m ipv6_addresses                       = (known after apply)
      [32m+[0m[0m key_name                             = "my-aws-key"
      [32m+[0m[0m monitoring                           = (known after apply)
      [32m+[0m[0m outpost_arn                          = (known after apply)
      [32m+[0m[0m password_data                        = (known after apply)
      [32m+[0m[0m placement_group                      = (known after apply)
      [32m+[0m[0m placement_partition_number           = (known after apply)
      [32m+[0m[0m primary_network_interface_id         = (known after apply)
      [32m+[0m[0m private_dns                          = (known after apply)
      [32m+[0m[0m private_ip                           = (known after apply)
      [32m+[0m[0m public_dns                           = (known after apply)
      [32m+[0m[0m public_ip                            = (known after apply)
      [32m+[0m[0m secondary_private_ips                = (known after apply)
      [32m+[0m[0m security_groups                      = (known after apply)
      [32m+[0m[0m source_dest_check                    = true
      [32m+[0m[0m spot_instance_request_id             = (known after apply)
      [32m+[0m[0m subnet_id                            = (known after apply)
      [32m+[0m[0m tags                                 = {
          [32m+[0m[0m "Name" = "HAProxy Bastion"
        }
      [32m+[0m[0m tags_all                             = {
          [32m+[0m[0m "Name" = "HAProxy Bastion"
        }
      [32m+[0m[0m tenancy                              = (known after apply)
      [32m+[0m[0m user_data                            = (known after apply)
      [32m+[0m[0m user_data_base64                     = (known after apply)
      [32m+[0m[0m user_data_replace_on_change          = false
      [32m+[0m[0m vpc_security_group_ids               = (known after apply)

      [32m+[0m[0m capacity_reservation_specification (known after apply)

      [32m+[0m[0m cpu_options (known after apply)

      [32m+[0m[0m ebs_block_device (known after apply)

      [32m+[0m[0m enclave_options (known after apply)

      [32m+[0m[0m ephemeral_block_device (known after apply)

      [32m+[0m[0m instance_market_options (known after apply)

      [32m+[0m[0m maintenance_options (known after apply)

      [32m+[0m[0m metadata_options (known after apply)

      [32m+[0m[0m network_interface (known after apply)

      [32m+[0m[0m private_dns_name_options (known after apply)

      [32m+[0m[0m root_block_device (known after apply)
    }

[1m  # module.k3s_haproxy.aws_instance.k3s_instance[0m will be created
[0m  [32m+[0m[0m resource "aws_instance" "k3s_instance" {
      [32m+[0m[0m ami                                  = "ami-020cba7c55df1f615"
      [32m+[0m[0m arn                                  = (known after apply)
      [32m+[0m[0m associate_public_ip_address          = false
      [32m+[0m[0m availability_zone                    = (known after apply)
      [32m+[0m[0m cpu_core_count                       = (known after apply)
      [32m+[0m[0m cpu_threads_per_core                 = (known after apply)
      [32m+[0m[0m disable_api_stop                     = (known after apply)
      [32m+[0m[0m disable_api_termination              = (known after apply)
      [32m+[0m[0m ebs_optimized                        = (known after apply)
      [32m+[0m[0m enable_primary_ipv6                  = (known after apply)
      [32m+[0m[0m get_password_data                    = false
      [32m+[0m[0m host_id                              = (known after apply)
      [32m+[0m[0m host_resource_group_arn              = (known after apply)
      [32m+[0m[0m iam_instance_profile                 = (known after apply)
      [32m+[0m[0m id                                   = (known after apply)
      [32m+[0m[0m instance_initiated_shutdown_behavior = (known after apply)
      [32m+[0m[0m instance_lifecycle                   = (known after apply)
      [32m+[0m[0m instance_state                       = (known after apply)
      [32m+[0m[0m instance_type                        = "t3.small"
      [32m+[0m[0m ipv6_address_count                   = (known after apply)
      [32m+[0m[0m ipv6_addresses                       = (known after apply)
      [32m+[0m[0m key_name                             = "my-aws-key"
      [32m+[0m[0m monitoring                           = (known after apply)
      [32m+[0m[0m outpost_arn                          = (known after apply)
      [32m+[0m[0m password_data                        = (known after apply)
      [32m+[0m[0m placement_group                      = (known after apply)
      [32m+[0m[0m placement_partition_number           = (known after apply)
      [32m+[0m[0m primary_network_interface_id         = (known after apply)
      [32m+[0m[0m private_dns                          = (known after apply)
      [32m+[0m[0m private_ip                           = (known after apply)
      [32m+[0m[0m public_dns                           = (known after apply)
      [32m+[0m[0m public_ip                            = (known after apply)
      [32m+[0m[0m secondary_private_ips                = (known after apply)
      [32m+[0m[0m security_groups                      = (known after apply)
      [32m+[0m[0m source_dest_check                    = true
      [32m+[0m[0m spot_instance_request_id             = (known after apply)
      [32m+[0m[0m subnet_id                            = (known after apply)
      [32m+[0m[0m tags                                 = {
          [32m+[0m[0m "Name" = "K3s Server Node"
        }
      [32m+[0m[0m tags_all                             = {
          [32m+[0m[0m "Name" = "K3s Server Node"
        }
      [32m+[0m[0m tenancy                              = (known after apply)
      [32m+[0m[0m user_data                            = "091936d6335b5c2ef04db608981cf584c09069ef"
      [32m+[0m[0m user_data_base64                     = (known after apply)
      [32m+[0m[0m user_data_replace_on_change          = false
      [32m+[0m[0m vpc_security_group_ids               = (known after apply)

      [32m+[0m[0m capacity_reservation_specification (known after apply)

      [32m+[0m[0m cpu_options (known after apply)

      [32m+[0m[0m ebs_block_device (known after apply)

      [32m+[0m[0m enclave_options (known after apply)

      [32m+[0m[0m ephemeral_block_device (known after apply)

      [32m+[0m[0m instance_market_options (known after apply)

      [32m+[0m[0m maintenance_options (known after apply)

      [32m+[0m[0m metadata_options (known after apply)

      [32m+[0m[0m network_interface (known after apply)

      [32m+[0m[0m private_dns_name_options (known after apply)

      [32m+[0m[0m root_block_device (known after apply)
    }

[1m  # module.k3s_haproxy.aws_security_group.haproxy_sg[0m will be created
[0m  [32m+[0m[0m resource "aws_security_group" "haproxy_sg" {
      [32m+[0m[0m arn                    = (known after apply)
      [32m+[0m[0m description            = "Allow public access to HAProxy"
      [32m+[0m[0m egress                 = [
          [32m+[0m[0m {
              [32m+[0m[0m cidr_blocks      = [
                  [32m+[0m[0m "0.0.0.0/0",
                ]
              [32m+[0m[0m from_port        = 0
              [32m+[0m[0m ipv6_cidr_blocks = []
              [32m+[0m[0m prefix_list_ids  = []
              [32m+[0m[0m protocol         = "-1"
              [32m+[0m[0m security_groups  = []
              [32m+[0m[0m self             = false
              [32m+[0m[0m to_port          = 0
                [90m# (1 unchanged attribute hidden)[0m[0m
            },
        ]
      [32m+[0m[0m id                     = (known after apply)
      [32m+[0m[0m ingress                = [
          [32m+[0m[0m {
              [32m+[0m[0m cidr_blocks      = [
                  [32m+[0m[0m "0.0.0.0/0",
                ]
              [32m+[0m[0m from_port        = 22
              [32m+[0m[0m ipv6_cidr_blocks = []
              [32m+[0m[0m prefix_list_ids  = []
              [32m+[0m[0m protocol         = "tcp"
              [32m+[0m[0m security_groups  = []
              [32m+[0m[0m self             = false
              [32m+[0m[0m to_port          = 22
                [90m# (1 unchanged attribute hidden)[0m[0m
            },
          [32m+[0m[0m {
              [32m+[0m[0m cidr_blocks      = [
                  [32m+[0m[0m "0.0.0.0/0",
                ]
              [32m+[0m[0m from_port        = 6443
              [32m+[0m[0m ipv6_cidr_blocks = []
              [32m+[0m[0m prefix_list_ids  = []
              [32m+[0m[0m protocol         = "tcp"
              [32m+[0m[0m security_groups  = []
              [32m+[0m[0m self             = false
              [32m+[0m[0m to_port          = 6443
                [90m# (1 unchanged attribute hidden)[0m[0m
            },
        ]
      [32m+[0m[0m name                   = "haproxy_sg"
      [32m+[0m[0m name_prefix            = (known after apply)
      [32m+[0m[0m owner_id               = (known after apply)
      [32m+[0m[0m revoke_rules_on_delete = false
      [32m+[0m[0m tags                   = {
          [32m+[0m[0m "Name" = "haproxy_sg"
        }
      [32m+[0m[0m tags_all               = {
          [32m+[0m[0m "Name" = "haproxy_sg"
        }
      [32m+[0m[0m vpc_id                 = (known after apply)
    }

[1m  # module.k3s_haproxy.aws_security_group.k3s_sg[0m will be created
[0m  [32m+[0m[0m resource "aws_security_group" "k3s_sg" {
      [32m+[0m[0m arn                    = (known after apply)
      [32m+[0m[0m description            = "Allow SSH & K3s API traffic from HAProxy only"
      [32m+[0m[0m egress                 = [
          [32m+[0m[0m {
              [32m+[0m[0m cidr_blocks      = [
                  [32m+[0m[0m "0.0.0.0/0",
                ]
              [32m+[0m[0m from_port        = 0
              [32m+[0m[0m ipv6_cidr_blocks = []
              [32m+[0m[0m prefix_list_ids  = []
              [32m+[0m[0m protocol         = "-1"
              [32m+[0m[0m security_groups  = []
              [32m+[0m[0m self             = false
              [32m+[0m[0m to_port          = 0
                [90m# (1 unchanged attribute hidden)[0m[0m
            },
        ]
      [32m+[0m[0m id                     = (known after apply)
      [32m+[0m[0m ingress                = [
          [32m+[0m[0m {
              [32m+[0m[0m cidr_blocks      = []
              [32m+[0m[0m description      = "K3s API from HAProxy"
              [32m+[0m[0m from_port        = 6443
              [32m+[0m[0m ipv6_cidr_blocks = []
              [32m+[0m[0m prefix_list_ids  = []
              [32m+[0m[0m protocol         = "tcp"
              [32m+[0m[0m security_groups  = (known after apply)
              [32m+[0m[0m self             = false
              [32m+[0m[0m to_port          = 6443
            },
          [32m+[0m[0m {
              [32m+[0m[0m cidr_blocks      = []
              [32m+[0m[0m description      = "SSH from HAProxy"
              [32m+[0m[0m from_port        = 22
              [32m+[0m[0m ipv6_cidr_blocks = []
              [32m+[0m[0m prefix_list_ids  = []
              [32m+[0m[0m protocol         = "tcp"
              [32m+[0m[0m security_groups  = (known after apply)
              [32m+[0m[0m self             = false
              [32m+[0m[0m to_port          = 22
            },
        ]
      [32m+[0m[0m name                   = "k3s_sg"
      [32m+[0m[0m name_prefix            = (known after apply)
      [32m+[0m[0m owner_id               = (known after apply)
      [32m+[0m[0m revoke_rules_on_delete = false
      [32m+[0m[0m tags                   = {
          [32m+[0m[0m "Name" = "k3s_sg"
        }
      [32m+[0m[0m tags_all               = {
          [32m+[0m[0m "Name" = "k3s_sg"
        }
      [32m+[0m[0m vpc_id                 = (known after apply)
    }

[1m  # module.k3s_haproxy.null_resource.export_kubeconfig[0m will be created
[0m  [32m+[0m[0m resource "null_resource" "export_kubeconfig" {
      [32m+[0m[0m id = (known after apply)
    }

[1m  # module.vpc.aws_eip.nat[0m will be created
[0m  [32m+[0m[0m resource "aws_eip" "nat" {
      [32m+[0m[0m allocation_id        = (known after apply)
      [32m+[0m[0m arn                  = (known after apply)
      [32m+[0m[0m association_id       = (known after apply)
      [32m+[0m[0m carrier_ip           = (known after apply)
      [32m+[0m[0m customer_owned_ip    = (known after apply)
      [32m+[0m[0m domain               = "vpc"
      [32m+[0m[0m id                   = (known after apply)
      [32m+[0m[0m instance             = (known after apply)
      [32m+[0m[0m ipam_pool_id         = (known after apply)
      [32m+[0m[0m network_border_group = (known after apply)
      [32m+[0m[0m network_interface    = (known after apply)
      [32m+[0m[0m private_dns          = (known after apply)
      [32m+[0m[0m private_ip           = (known after apply)
      [32m+[0m[0m ptr_record           = (known after apply)
      [32m+[0m[0m public_dns           = (known after apply)
      [32m+[0m[0m public_ip            = (known after apply)
      [32m+[0m[0m public_ipv4_pool     = (known after apply)
      [32m+[0m[0m tags                 = {
          [32m+[0m[0m "Name" = "nat_eip"
        }
      [32m+[0m[0m tags_all             = {
          [32m+[0m[0m "Name" = "nat_eip"
        }
      [32m+[0m[0m vpc                  = (known after apply)
    }

[1m  # module.vpc.aws_internet_gateway.igw[0m will be created
[0m  [32m+[0m[0m resource "aws_internet_gateway" "igw" {
      [32m+[0m[0m arn      = (known after apply)
      [32m+[0m[0m id       = (known after apply)
      [32m+[0m[0m owner_id = (known after apply)
      [32m+[0m[0m tags     = {
          [32m+[0m[0m "Name" = "Amazing-Heights-K3s-VPC-igw"
        }
      [32m+[0m[0m tags_all = {
          [32m+[0m[0m "Name" = "Amazing-Heights-K3s-VPC-igw"
        }
      [32m+[0m[0m vpc_id   = (known after apply)
    }

[1m  # module.vpc.aws_nat_gateway.nat[0m will be created
[0m  [32m+[0m[0m resource "aws_nat_gateway" "nat" {
      [32m+[0m[0m allocation_id                      = (known after apply)
      [32m+[0m[0m association_id                     = (known after apply)
      [32m+[0m[0m connectivity_type                  = "public"
      [32m+[0m[0m id                                 = (known after apply)
      [32m+[0m[0m network_interface_id               = (known after apply)
      [32m+[0m[0m private_ip                         = (known after apply)
      [32m+[0m[0m public_ip                          = (known after apply)
      [32m+[0m[0m secondary_private_ip_address_count = (known after apply)
      [32m+[0m[0m secondary_private_ip_addresses     = (known after apply)
      [32m+[0m[0m subnet_id                          = (known after apply)
      [32m+[0m[0m tags                               = {
          [32m+[0m[0m "Name" = "nat_gateway"
        }
      [32m+[0m[0m tags_all                           = {
          [32m+[0m[0m "Name" = "nat_gateway"
        }
    }

[1m  # module.vpc.aws_route_table.private[0m will be created
[0m  [32m+[0m[0m resource "aws_route_table" "private" {
      [32m+[0m[0m arn              = (known after apply)
      [32m+[0m[0m id               = (known after apply)
      [32m+[0m[0m owner_id         = (known after apply)
      [32m+[0m[0m propagating_vgws = (known after apply)
      [32m+[0m[0m route            = [
          [32m+[0m[0m {
              [32m+[0m[0m cidr_block                 = "0.0.0.0/0"
              [32m+[0m[0m nat_gateway_id             = (known after apply)
                [90m# (11 unchanged attributes hidden)[0m[0m
            },
        ]
      [32m+[0m[0m tags             = {
          [32m+[0m[0m "Name" = "private_rt"
        }
      [32m+[0m[0m tags_all         = {
          [32m+[0m[0m "Name" = "private_rt"
        }
      [32m+[0m[0m vpc_id           = (known after apply)
    }

[1m  # module.vpc.aws_route_table.public[0m will be created
[0m  [32m+[0m[0m resource "aws_route_table" "public" {
      [32m+[0m[0m arn              = (known after apply)
      [32m+[0m[0m id               = (known after apply)
      [32m+[0m[0m owner_id         = (known after apply)
      [32m+[0m[0m propagating_vgws = (known after apply)
      [32m+[0m[0m route            = [
          [32m+[0m[0m {
              [32m+[0m[0m cidr_block                 = "0.0.0.0/0"
              [32m+[0m[0m gateway_id                 = (known after apply)
                [90m# (11 unchanged attributes hidden)[0m[0m
            },
        ]
      [32m+[0m[0m tags             = {
          [32m+[0m[0m "Name" = "public_rt"
        }
      [32m+[0m[0m tags_all         = {
          [32m+[0m[0m "Name" = "public_rt"
        }
      [32m+[0m[0m vpc_id           = (known after apply)
    }

[1m  # module.vpc.aws_route_table_association.private_assoc[0m will be created
[0m  [32m+[0m[0m resource "aws_route_table_association" "private_assoc" {
      [32m+[0m[0m id             = (known after apply)
      [32m+[0m[0m route_table_id = (known after apply)
      [32m+[0m[0m subnet_id      = (known after apply)
    }

[1m  # module.vpc.aws_route_table_association.public_assoc[0m will be created
[0m  [32m+[0m[0m resource "aws_route_table_association" "public_assoc" {
      [32m+[0m[0m id             = (known after apply)
      [32m+[0m[0m route_table_id = (known after apply)
      [32m+[0m[0m subnet_id      = (known after apply)
    }

[1m  # module.vpc.aws_subnet.private[0m will be created
[0m  [32m+[0m[0m resource "aws_subnet" "private" {
      [32m+[0m[0m arn                                            = (known after apply)
      [32m+[0m[0m assign_ipv6_address_on_creation                = false
      [32m+[0m[0m availability_zone                              = "us-east-1a"
      [32m+[0m[0m availability_zone_id                           = (known after apply)
      [32m+[0m[0m cidr_block                                     = "10.0.2.0/24"
      [32m+[0m[0m enable_dns64                                   = false
      [32m+[0m[0m enable_resource_name_dns_a_record_on_launch    = false
      [32m+[0m[0m enable_resource_name_dns_aaaa_record_on_launch = false
      [32m+[0m[0m id                                             = (known after apply)
      [32m+[0m[0m ipv6_cidr_block_association_id                 = (known after apply)
      [32m+[0m[0m ipv6_native                                    = false
      [32m+[0m[0m map_public_ip_on_launch                        = false
      [32m+[0m[0m owner_id                                       = (known after apply)
      [32m+[0m[0m private_dns_hostname_type_on_launch            = (known after apply)
      [32m+[0m[0m tags                                           = {
          [32m+[0m[0m "Name" = "private_subnet"
        }
      [32m+[0m[0m tags_all                                       = {
          [32m+[0m[0m "Name" = "private_subnet"
        }
      [32m+[0m[0m vpc_id                                         = (known after apply)
    }

[1m  # module.vpc.aws_subnet.public[0m will be created
[0m  [32m+[0m[0m resource "aws_subnet" "public" {
      [32m+[0m[0m arn                                            = (known after apply)
      [32m+[0m[0m assign_ipv6_address_on_creation                = false
      [32m+[0m[0m availability_zone                              = "us-east-1a"
      [32m+[0m[0m availability_zone_id                           = (known after apply)
      [32m+[0m[0m cidr_block                                     = "10.0.1.0/24"
      [32m+[0m[0m enable_dns64                                   = false
      [32m+[0m[0m enable_resource_name_dns_a_record_on_launch    = false
      [32m+[0m[0m enable_resource_name_dns_aaaa_record_on_launch = false
      [32m+[0m[0m id                                             = (known after apply)
      [32m+[0m[0m ipv6_cidr_block_association_id                 = (known after apply)
      [32m+[0m[0m ipv6_native                                    = false
      [32m+[0m[0m map_public_ip_on_launch                        = true
      [32m+[0m[0m owner_id                                       = (known after apply)
      [32m+[0m[0m private_dns_hostname_type_on_launch            = (known after apply)
      [32m+[0m[0m tags                                           = {
          [32m+[0m[0m "Name" = "public_subnet"
        }
      [32m+[0m[0m tags_all                                       = {
          [32m+[0m[0m "Name" = "public_subnet"
        }
      [32m+[0m[0m vpc_id                                         = (known after apply)
    }

[1m  # module.vpc.aws_vpc.main[0m will be created
[0m  [32m+[0m[0m resource "aws_vpc" "main" {
      [32m+[0m[0m arn                                  = (known after apply)
      [32m+[0m[0m cidr_block                           = "10.0.0.0/16"
      [32m+[0m[0m default_network_acl_id               = (known after apply)
      [32m+[0m[0m default_route_table_id               = (known after apply)
      [32m+[0m[0m default_security_group_id            = (known after apply)
      [32m+[0m[0m dhcp_options_id                      = (known after apply)
      [32m+[0m[0m enable_dns_hostnames                 = true
      [32m+[0m[0m enable_dns_support                   = true
      [32m+[0m[0m enable_network_address_usage_metrics = (known after apply)
      [32m+[0m[0m id                                   = (known after apply)
      [32m+[0m[0m instance_tenancy                     = "default"
      [32m+[0m[0m ipv6_association_id                  = (known after apply)
      [32m+[0m[0m ipv6_cidr_block                      = (known after apply)
      [32m+[0m[0m ipv6_cidr_block_network_border_group = (known after apply)
      [32m+[0m[0m main_route_table_id                  = (known after apply)
      [32m+[0m[0m owner_id                             = (known after apply)
      [32m+[0m[0m tags                                 = {
          [32m+[0m[0m "Name" = "Amazing-Heights-K3s-VPC"
        }
      [32m+[0m[0m tags_all                             = {
          [32m+[0m[0m "Name" = "Amazing-Heights-K3s-VPC"
        }
    }

[1mPlan:[0m 15 to add, 0 to change, 0 to destroy.
[0m
Changes to Outputs:
  [32m+[0m[0m haproxy_public_ip = (known after apply)
  [32m+[0m[0m k3s_private_ip    = (known after apply)
[0m[1mmodule.vpc.aws_eip.nat: Creating...[0m[0m
[0m[1mmodule.vpc.aws_vpc.main: Creating...[0m[0m
[0m[1mmodule.vpc.aws_eip.nat: Creation complete after 5s [id=eipalloc-0fd78af1d8e00e0cb][0m
[0m[1mmodule.vpc.aws_vpc.main: Still creating... [00m10s elapsed][0m[0m
[0m[1mmodule.vpc.aws_vpc.main: Still creating... [00m20s elapsed][0m[0m
[0m[1mmodule.vpc.aws_vpc.main: Creation complete after 25s [id=vpc-07d9598173c025672][0m
[0m[1mmodule.vpc.aws_subnet.public: Creating...[0m[0m
[0m[1mmodule.vpc.aws_internet_gateway.igw: Creating...[0m[0m
[0m[1mmodule.vpc.aws_subnet.private: Creating...[0m[0m
[0m[1mmodule.k3s_haproxy.aws_security_group.haproxy_sg: Creating...[0m[0m
[0m[1mmodule.vpc.aws_subnet.private: Creation complete after 3s [id=subnet-07d9a94c599b1a70a][0m
[0m[1mmodule.vpc.aws_internet_gateway.igw: Creation complete after 4s [id=igw-089e56df366ca4842][0m
[0m[1mmodule.vpc.aws_route_table.public: Creating...[0m[0m
[0m[1mmodule.vpc.aws_route_table.public: Creation complete after 3s [id=rtb-053c431fb26bca6e1][0m
[0m[1mmodule.k3s_haproxy.aws_security_group.haproxy_sg: Creation complete after 9s [id=sg-022eff2aa934cc628][0m
[0m[1mmodule.k3s_haproxy.aws_security_group.k3s_sg: Creating...[0m[0m
[0m[1mmodule.vpc.aws_subnet.public: Still creating... [00m10s elapsed][0m[0m
[0m[1mmodule.vpc.aws_subnet.public: Creation complete after 14s [id=subnet-037b4f7d7557a1bfe][0m
[0m[1mmodule.vpc.aws_nat_gateway.nat: Creating...[0m[0m
[0m[1mmodule.vpc.aws_route_table_association.public_assoc: Creating...[0m[0m
[0m[1mmodule.vpc.aws_route_table_association.public_assoc: Creation complete after 2s [id=rtbassoc-00b3d14d586a40e37][0m
[0m[1mmodule.k3s_haproxy.aws_security_group.k3s_sg: Creation complete after 7s [id=sg-001c5e06b9492d00c][0m
[0m[1mmodule.k3s_haproxy.aws_instance.k3s_instance: Creating...[0m[0m
[0m[1mmodule.vpc.aws_nat_gateway.nat: Still creating... [00m10s elapsed][0m[0m
[0m[1mmodule.k3s_haproxy.aws_instance.k3s_instance: Still creating... [00m10s elapsed][0m[0m
[0m[1mmodule.vpc.aws_nat_gateway.nat: Still creating... [00m20s elapsed][0m[0m
[0m[1mmodule.k3s_haproxy.aws_instance.k3s_instance: Creation complete after 19s [id=i-06b46807066e4db9d][0m
[0m[1mmodule.k3s_haproxy.aws_instance.haproxy_bastion: Creating...[0m[0m
[0m[1mmodule.vpc.aws_nat_gateway.nat: Still creating... [00m30s elapsed][0m[0m
[0m[1mmodule.k3s_haproxy.aws_instance.haproxy_bastion: Still creating... [00m10s elapsed][0m[0m
[0m[1mmodule.k3s_haproxy.aws_instance.haproxy_bastion: Creation complete after 17s [id=i-001315adee7aba414][0m
[0m[1mmodule.k3s_haproxy.null_resource.export_kubeconfig: Creating...[0m[0m
[0m[1mmodule.vpc.aws_nat_gateway.nat: Still creating... [00m40s elapsed][0m[0m
[0m[1mmodule.k3s_haproxy.null_resource.export_kubeconfig: Provisioning with 'local-exec'...[0m[0m
[0m[1mmodule.k3s_haproxy.null_resource.export_kubeconfig (local-exec):[0m [0mExecuting: ["cmd" "/C" "bash 02-k3s-haproxy/scripts/kubeconfig_export.sh"]
[0m[1mmodule.k3s_haproxy.null_resource.export_kubeconfig: Still creating... [00m10s elapsed][0m[0m
[0m[1mmodule.vpc.aws_nat_gateway.nat: Still creating... [00m50s elapsed][0m[0m
[0m[1mmodule.k3s_haproxy.null_resource.export_kubeconfig: Still creating... [00m20s elapsed][0m[0m
[0m[1mmodule.vpc.aws_nat_gateway.nat: Still creating... [01m00s elapsed][0m[0m
[0m[1mmodule.k3s_haproxy.null_resource.export_kubeconfig: Still creating... [00m30s elapsed][0m[0m
[0m[1mmodule.vpc.aws_nat_gateway.nat: Still creating... [01m10s elapsed][0m[0m
[0m[1mmodule.k3s_haproxy.null_resource.export_kubeconfig: Still creating... [00m40s elapsed][0m[0m
[0m[1mmodule.vpc.aws_nat_gateway.nat: Still creating... [01m20s elapsed][0m[0m
[0m[1mmodule.k3s_haproxy.null_resource.export_kubeconfig: Still creating... [00m50s elapsed][0m[0m
[0m[1mmodule.vpc.aws_nat_gateway.nat: Still creating... [01m30s elapsed][0m[0m
[0m[1mmodule.k3s_haproxy.null_resource.export_kubeconfig: Still creating... [01m00s elapsed][0m[0m
[0m[1mmodule.vpc.aws_nat_gateway.nat: Still creating... [01m40s elapsed][0m[0m
[0m[1mmodule.vpc.aws_nat_gateway.nat: Creation complete after 1m40s [id=nat-018f6c0a2c1801c2c][0m
[0m[1mmodule.vpc.aws_route_table.private: Creating...[0m[0m
[0m[1mmodule.vpc.aws_route_table.private: Creation complete after 3s [id=rtb-006cd0ccd439db387][0m
[0m[1mmodule.vpc.aws_route_table_association.private_assoc: Creating...[0m[0m
[0m[1mmodule.vpc.aws_route_table_association.private_assoc: Creation complete after 2s [id=rtbassoc-0bccac2fdf2bb35c9][0m
[0m[1mmodule.k3s_haproxy.null_resource.export_kubeconfig: Still creating... [01m10s elapsed][0m[0m
[0m[1mmodule.k3s_haproxy.null_resource.export_kubeconfig: Still creating... [01m20s elapsed][0m[0m
[0m[1mmodule.k3s_haproxy.null_resource.export_kubeconfig: Still creating... [01m30s elapsed][0m[0m
[0m[1mmodule.k3s_haproxy.null_resource.export_kubeconfig: Still creating... [01m40s elapsed][0m[0m
[0m[1mmodule.k3s_haproxy.null_resource.export_kubeconfig: Still creating... [01m50s elapsed][0m[0m
[0m[1mmodule.k3s_haproxy.null_resource.export_kubeconfig: Still creating... [02m00s elapsed][0m[0m
[0m[1mmodule.k3s_haproxy.null_resource.export_kubeconfig: Still creating... [02m10s elapsed][0m[0m
[0m[1mmodule.k3s_haproxy.null_resource.export_kubeconfig: Still creating... [02m20s elapsed][0m[0m
[0m[1mmodule.k3s_haproxy.null_resource.export_kubeconfig: Still creating... [02m30s elapsed][0m[0m
[0m[1mmodule.k3s_haproxy.null_resource.export_kubeconfig: Still creating... [02m40s elapsed][0m[0m
[0m[1mmodule.k3s_haproxy.null_resource.export_kubeconfig: Still creating... [02m50s elapsed][0m[0m
[0m[1mmodule.k3s_haproxy.null_resource.export_kubeconfig: Still creating... [03m00s elapsed][0m[0m
[0m[1mmodule.k3s_haproxy.null_resource.export_kubeconfig: Still creating... [03m10s elapsed][0m[0m
[0m[1mmodule.k3s_haproxy.null_resource.export_kubeconfig (local-exec):[0m [0mWarning: Permanently added '44.201.1.100' (ED25519) to the list of known hosts.
[0m[1mmodule.k3s_haproxy.null_resource.export_kubeconfig (local-exec):[0m [0mConnection closed by 44.201.1.100 port 22
[0m[1mmodule.k3s_haproxy.null_resource.export_kubeconfig (local-exec):[0m [0mConnection closed by UNKNOWN port 65535
[0m[1mmodule.k3s_haproxy.null_resource.export_kubeconfig (local-exec):[0m [0mscp: Connection closed
[31mâ•·[0m[0m
[31mâ”‚[0m [0m[1m[31mError: [0m[0m[1mlocal-exec provisioner error[0m
[31mâ”‚[0m [0m
[31mâ”‚[0m [0m[0m  with module.k3s_haproxy.null_resource.export_kubeconfig,
[31mâ”‚[0m [0m  on 02-k3s-haproxy\main.tf line 137, in resource "null_resource" "export_kubeconfig":
[31mâ”‚[0m [0m 137:   provisioner "local-exec" [4m{[0m[0m
[31mâ”‚[0m [0m
[31mâ”‚[0m [0mError running command 'bash 02-k3s-haproxy/scripts/kubeconfig_export.sh':
[31mâ”‚[0m [0mexit status 255. Output: Warning: Permanently added '44.201.1.100'
[31mâ”‚[0m [0m(ED25519) to the list of known hosts.
[31mâ”‚[0m [0mConnection closed by 44.201.1.100 port 22
[31mâ”‚[0m [0mConnection closed by UNKNOWN port 65535
[31mâ”‚[0m [0mscp: Connection closed
[31mâ”‚[0m [0m
[31mâ•µ[0m[0m
Releasing state lock. This may take a few moments...
